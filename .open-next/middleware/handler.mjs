globalThis.monorepoPackagePath = '';import process from 'node:process';import { Buffer } from 'node:buffer';import { AsyncLocalStorage } from 'node:async_hooks';import { createRequire as topLevelCreateRequire } from 'module';const require = topLevelCreateRequire(import.meta.url);import bannerUrl from 'url';const __dirname = bannerUrl.fileURLToPath(new URL('.', import.meta.url));globalThis.openNextDebug = false;globalThis.openNextVersion = "3.7.4";
var kt=Object.create;var he=Object.defineProperty;var Ft=Object.getOwnPropertyDescriptor;var Bt=Object.getOwnPropertyNames;var qt=Object.getPrototypeOf,Wt=Object.prototype.hasOwnProperty;var L=(e,r)=>()=>(e&&(r=e(e=0)),r);var zt=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),q=(e,r)=>{for(var t in r)he(e,t,{get:r[t],enumerable:!0})},Qt=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Bt(r))!Wt.call(e,a)&&a!==t&&he(e,a,{get:()=>r[a],enumerable:!(o=Ft(r,a))||o.enumerable});return e};var Xt=(e,r,t)=>(t=e!=null?kt(qt(e)):{},Qt(r||!e||!e.__esModule?he(t,"default",{value:e,enumerable:!0}):t,e));function J(e){try{return"__openNextInternal"in e}catch{return!1}}var Ae=L(()=>{});function g(...e){globalThis.openNextDebug&&console.log(...e)}function Gt(...e){console.warn(...e)}function I(...e){if(e.some(r=>Vt(r)))return g(...e);if(e.some(r=>J(r))){let r=e.find(t=>J(t));return r.logLevel<Kt()?void 0:r.logLevel===0?console.log(...e.map(t=>J(t)?`${t.name}: ${t.message}`:t)):r.logLevel===1?Gt(...e.map(t=>J(t)?`${t.name}: ${t.message}`:t)):console.error(...e)}console.error(...e)}function Kt(){switch((process.env.OPEN_NEXT_ERROR_LOG_LEVEL??"1").toLowerCase()){case"debug":case"0":return 0;case"error":case"2":return 2;default:return 1}}var Jt,Vt,T=L(()=>{Ae();Jt=[{clientName:"S3Client",commandName:"GetObjectCommand",errorName:"NoSuchKey"}],Vt=e=>Jt.some(r=>r.clientName===e?.clientName&&r.commandName===e?.commandName&&(r.errorName===e?.error?.name||r.errorName===e?.error?.Code))});var Oe=zt(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.parse=ir;ne.serialize=sr;var er=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,tr=/^[\u0021-\u003A\u003C-\u007E]*$/,rr=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,or=/^[\u0020-\u003A\u003D-\u007E]*$/,ar=Object.prototype.toString,nr=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function ir(e,r){let t=new nr,o=e.length;if(o<2)return t;let a=r?.decode||cr,n=0;do{let i=e.indexOf("=",n);if(i===-1)break;let s=e.indexOf(";",n),d=s===-1?o:s;if(i>d){n=e.lastIndexOf(";",i-1)+1;continue}let u=Le(e,n,i),l=He(e,i,u),c=e.slice(u,l);if(t[c]===void 0){let f=Le(e,i+1,d),p=He(e,d,f),h=a(e.slice(f,p));t[c]=h}n=d+1}while(n<o);return t}function Le(e,r,t){do{let o=e.charCodeAt(r);if(o!==32&&o!==9)return r}while(++r<t);return t}function He(e,r,t){for(;r>t;){let o=e.charCodeAt(--r);if(o!==32&&o!==9)return r+1}return t}function sr(e,r,t){let o=t?.encode||encodeURIComponent;if(!er.test(e))throw new TypeError(`argument name is invalid: ${e}`);let a=o(r);if(!tr.test(a))throw new TypeError(`argument val is invalid: ${r}`);let n=e+"="+a;if(!t)return n;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);n+="; Max-Age="+t.maxAge}if(t.domain){if(!rr.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);n+="; Domain="+t.domain}if(t.path){if(!or.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);n+="; Path="+t.path}if(t.expires){if(!lr(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);n+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(n+="; HttpOnly"),t.secure&&(n+="; Secure"),t.partitioned&&(n+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":n+="; Priority=Low";break;case"medium":n+="; Priority=Medium";break;case"high":n+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":n+="; SameSite=Strict";break;case"lax":n+="; SameSite=Lax";break;case"none":n+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return n}function cr(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function lr(e){return ar.call(e)==="[object Date]"}});function ge(e){return e?typeof e=="string"?e.split(/(?<!Expires=\w+),/i).map(r=>r.trim()):e:[]}function ie(e){let r={};for(let[t,o]of e)t in r?Array.isArray(r[t])?r[t].push(o):r[t]=[r[t],o]:r[t]=o;return r}var V=L(()=>{});function se(e){return ie(e.entries())}var xe=L(()=>{V()});var Ie={};q(Ie,{default:()=>pr});import{Buffer as ur}from"node:buffer";var Me,dr,fr,pr,$e=L(()=>{Me=Xt(Oe(),1);V();xe();dr=new Set([101,103,204,205,304]),fr={convertFrom:async e=>{let r=new URL(e.url),t=r.searchParams,o=se(t),a=await e.arrayBuffer(),n={};e.headers.forEach((c,f)=>{n[f]=c});let i=r.pathname,s=e.method,d=s!=="GET"&&s!=="HEAD",u=e.headers.get("cookie"),l=u?Me.default.parse(u):{};return{type:"core",method:s,rawPath:i,url:e.url,body:d?ur.from(a):void 0,headers:n,remoteAddress:e.headers.get("x-forwarded-for")??"::1",query:o,cookies:l}},convertTo:async e=>{if("internalEvent"in e){let o=new Request(e.internalEvent.url,{body:e.internalEvent.body,method:e.internalEvent.method,headers:{...e.internalEvent.headers,"x-forwarded-host":e.internalEvent.headers.host}});if(globalThis.__dangerous_ON_edge_converter_returns_request===!0)return o;let a=(e.isISR||e.internalEvent.rawPath.startsWith("/_next/image"))&&process.env.DISABLE_CACHE!=="true"?{cacheEverything:!0}:{};return fetch(o,{cf:a})}let r=new Headers;for(let[o,a]of Object.entries(e.headers)){if(o==="set-cookie"&&typeof a=="string"){let n=ge(a);for(let i of n)r.append(o,i);continue}if(Array.isArray(a))for(let n of a)r.append(o,n);else r.set(o,a)}let t=dr.has(e.statusCode)?null:e.body;return new Response(t,{status:e.statusCode,headers:r})},name:"edge"},pr=fr});var je={};q(je,{default:()=>gr});var hr,mr,gr,De=L(()=>{hr={city:[encodeURIComponent,"x-open-next-city"],country:"x-open-next-country",regionCode:"x-open-next-region",latitude:"x-open-next-latitude",longitude:"x-open-next-longitude"},mr=async(e,r)=>async(t,o,a)=>{globalThis.process=process;for(let[u,l]of Object.entries(o))typeof l=="string"&&(process.env[u]=l);let n=await r.convertFrom(t),i=t.cf;for(let[u,l]of Object.entries(hr)){let c=i?.[u];if(c!=null){let[f,p]=Array.isArray(l)?l:[null,l];n.headers[p]=f?f(c):c}}let s=await e(n,{waitUntil:a.waitUntil.bind(a)});return await r.convertTo(s)},gr={wrapper:mr,name:"cloudflare-edge",supportStreaming:!0,edgeRuntime:!0}});var Ue={};q(Ue,{default:()=>wr});var xr,wr,ke=L(()=>{T();xr={name:"env",resolve:async e=>{try{let r=JSON.parse(process.env.OPEN_NEXT_ORIGIN??"{}");for(let[t,o]of Object.entries(globalThis.openNextConfig.functions??{}).filter(([a])=>a!=="default"))if(o.patterns.some(a=>new RegExp(`/${a.replace(/\*\*/g,"(.*)").replace(/\*/g,"([^/]*)").replace(/\//g,"\\/").replace(/\?/g,".")}`).test(e)))return g("Using origin",t,o.patterns),r[t];return e.startsWith("/_next/image")&&r.imageOptimizer?(g("Using origin","imageOptimizer",e),r.imageOptimizer):r.default?(g("Using default origin",r.default,e),r.default):!1}catch(r){return I("Error while resolving origin",r),!1}}},wr=xr});var Fe={};q(Fe,{default:()=>Rr});var yr,Rr,Be=L(()=>{yr={name:"dummy"},Rr=yr});import{Readable as W}from"node:stream";function ce(e,r){return W.toWeb(W.from(Buffer.from(e,r?"base64":"utf8")))}function A(){return process.env.OPEN_NEXT_FORCE_NON_EMPTY_RESPONSE==="true"?W.toWeb(W.from([Buffer.from("SOMETHING")])):W.toWeb(W.from([]))}var z=L(()=>{});var qe={};q(qe,{default:()=>_r});var Er,_r,We=L(()=>{z();Er={name:"fetch-proxy",proxy:async e=>{let{url:r,headers:t,method:o,body:a}=e,n=Object.fromEntries(Object.entries(t).filter(([d])=>d.toLowerCase()!=="cf-connecting-ip")),i=await fetch(r,{method:o,headers:n,body:a}),s={};return i.headers.forEach((d,u)=>{s[u]=d}),{type:"core",headers:s,statusCode:i.status,isBase64Encoded:!0,body:i.body??A()}}},_r=Er});var Ot={};q(Ot,{default:()=>Ht});import{Buffer as Yr}from"node:buffer";import{AsyncLocalStorage as Zr}from"node:async_hooks";async function Ht(e){X||(X=await(await import("./.next/server/middleware.js")).default);let t=await(X.default||X)({handler:X.middleware||X,request:e,page:"middleware"});return globalThis.__openNextAls.getStore()?.pendingPromiseRunner.add(t.waitUntil),t.response}var X,Mt=L(()=>{globalThis.Buffer=Yr;globalThis.AsyncLocalStorage=Zr});T();var ae=class{resolve;reject;promise;constructor(){let r,t;this.promise=new Promise((o,a)=>{r=o,t=a}),this.resolve=r,this.reject=t}},me=class{promises=[];withResolvers(){let r=new ae;return this.promises.push(r),r}add(r){let t=new ae;this.promises.push(t),r.then(t.resolve,t.reject)}async await(){g(`Awaiting ${this.promises.length} detached promises`),(await Promise.allSettled(this.promises.map(o=>o.promise))).filter(o=>o.status==="rejected").forEach(o=>{I(o.reason)})}};async function Yt(){let e=globalThis.__openNextAls.getStore(),r=e?.pendingPromiseRunner.await()??Promise.resolve();if(e?.waitUntil){e.waitUntil(r);return}await r}function Zt(){let e=Symbol.for("@next/request-context"),r=Symbol.for("@vercel/request-context"),t=globalThis.__openNextAls.getStore(),o=t?.waitUntil??(n=>t?.pendingPromiseRunner.add(n)),a={get:()=>({waitUntil:o})};globalThis[e]=a,process.env.EMULATE_VERCEL_REQUEST_CONTEXT&&(globalThis[r]=a)}function Ne({isISRRevalidation:e,waitUntil:r,requestId:t=Math.random().toString(36)},o){return globalThis.__openNextAls.run({requestId:t,pendingPromiseRunner:new me,isISRRevalidation:e,waitUntil:r,writtenTags:new Set},async()=>{Zt();let a;try{a=await o()}finally{await Yt()}return a})}T();T();async function ze(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>($e(),Ie))).default}async function Qe(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(De(),je))).default}async function Xe(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(ke(),Ue))).default}async function Ge(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(Be(),Fe))).default}async function Je(e){return typeof e=="function"?e():(await Promise.resolve().then(()=>(We(),qe))).default}async function Ve(e){let r=await import("./open-next.config.mjs").then(s=>s.default);globalThis.openNextConfig=r;let t=r[e.type],o=t&&"override"in t?t.override:void 0,a=await ze(o?.converter),{name:n,wrapper:i}=await Qe(o?.wrapper);return g("Using wrapper",n),i(e.handler,a)}import{parse as Nr,stringify as Lr}from"node:querystring";T();import it from"node:path";import H from"node:fs";import $ from"node:path";function Ke(e){let r=$.join(e,"required-server-files.json"),t=H.readFileSync(r,"utf-8"),{config:o}=JSON.parse(t);return o}function Ye(e){let r=$.join(e,"BUILD_ID");return H.readFileSync(r,"utf-8").trim()}function Ze(e){let r=$.join(e,"server/pages-manifest.json"),t=H.readFileSync(r,"utf-8");return JSON.parse(t)}function et(e){let r=$.join(e,"routes-manifest.json"),t=H.readFileSync(r,"utf-8"),o=JSON.parse(t),a=o.dataRoutes??[],n={static:a.filter(i=>i.routeKeys===void 0),dynamic:a.filter(i=>i.routeKeys!==void 0)};return{basePath:o.basePath,rewrites:Array.isArray(o.rewrites)?{beforeFiles:[],afterFiles:o.rewrites,fallback:[]}:{beforeFiles:o.rewrites.beforeFiles??[],afterFiles:o.rewrites.afterFiles??[],fallback:o.rewrites.fallback??[]},redirects:o.redirects??[],routes:{static:o.staticRoutes??[],dynamic:o.dynamicRoutes??[],data:n},locales:o.i18n?.locales??[]}}function tt(e){let r=$.join(e,"routes-manifest.json"),t=H.readFileSync(r,"utf-8");return JSON.parse(t).headers}function rt(e){let r=$.join(e,"prerender-manifest.json"),t=H.readFileSync(r,"utf-8");return JSON.parse(t)}function ot(e){let r=$.join(e,"app-path-routes-manifest.json");return H.existsSync(r)?JSON.parse(H.readFileSync(r,"utf-8")):{}}function at(e){let r=$.join(e,"server/middleware-manifest.json"),t=H.readFileSync(r,"utf-8");return JSON.parse(t)}function nt(e){let r=$.join(e,"server/functions-config-manifest.json");try{let t=H.readFileSync(r,"utf-8");return JSON.parse(t)}catch{return{functions:{},version:1}}}var O=it.join(__dirname,".next"),vr=it.join(__dirname,".open-next");g({NEXT_DIR:O,OPEN_NEXT_DIR:vr});var y=Ke(O),we=Ye(O);var N=et(O),st=tt(O),j=rt(O),ct=Ze(O);var lt=at(O);var ye=ot(O),ut=nt(O);T();V();V();T();z();T();function Cr(e,r,t){let o=new Map,a=e.replace(/[ \t]/g,"");if(r){let l=0;for(let c of r){let f=c.toLowerCase();if(o.set(f,{orig:c,pos:l++}),t.prefixMatch){let p=f.split("-");for(;p.pop(),p.length>0;){let h=p.join("-");o.has(h)||o.set(h,{orig:c,pos:l++})}}}}let n=a.split(","),i=[],s=new Set;for(let l=0;l<n.length;++l){let c=n[l];if(!c)continue;let f=c.split(";");if(f.length>2)throw new Error(`Invalid ${t.type} header`);let p=f[0].toLowerCase();if(!p)throw new Error(`Invalid ${t.type} header`);let h={token:p,pos:l,q:1};if(r&&o.has(p)&&(h.pref=o.get(p).pos),s.add(h.token),f.length===2){let m=f[1],[w,R]=m.split("=");if(!R||w!=="q"&&w!=="Q")throw new Error(`Invalid ${t.type} header`);let v=Number.parseFloat(R);if(v===0)continue;Number.isFinite(v)&&v<=1&&v>=.001&&(h.q=v)}i.push(h)}i.sort((l,c)=>c.q!==l.q?c.q-l.q:c.pref!==l.pref?l.pref===void 0?1:c.pref===void 0?-1:l.pref-c.pref:l.pos-c.pos);let d=i.map(l=>l.token);if(!r||!r.length)return d;let u=[];for(let l of d)if(l==="*")for(let[c,f]of o)s.has(c)||u.push(f.orig);else{let c=l.toLowerCase();o.has(c)&&u.push(o.get(c).orig)}return u}function Re(e="",r){return Cr(e,r,{type:"accept-language",prefixMatch:!0})[0]||void 0}function Sr(e){return y.i18n?.locales.includes(e.split("/")[1].toLowerCase())??!1}function Pr(e){let r=y.i18n,t=e.NEXT_LOCALE?.toLowerCase();return t?r?.locales.find(o=>t===o.toLowerCase()):void 0}function Ee({hostname:e,detectedLocale:r}){let o=y.i18n?.domains;if(!o)return;let a=r?.toLowerCase();for(let n of o){let i=n.domain.split(":",1)[0].toLowerCase();if(e===i||a===n.defaultLocale.toLowerCase()||n.locales?.some(s=>a===s.toLowerCase()))return n}}function K(e,r){let t=Ee({hostname:e.headers.host});if(r.localeDetection===!1)return t?.defaultLocale??r.defaultLocale;let o=Pr(e.cookies),a=Re(e.headers["accept-language"],r?.locales);return g({cookiesLocale:o,preferredLocale:a,defaultLocale:r.defaultLocale,domainLocale:t}),t?.defaultLocale??o??a??r.defaultLocale}function k(e){let r=y.i18n;return!r||Sr(e.rawPath)?e.rawPath:`/${K(e,r)}${e.rawPath}`}function dt(e){let r=y.i18n;if(!r||r.localeDetection===!1||e.rawPath!=="/")return!1;let t=Re(e.headers["accept-language"],r?.locales),o=K(e,r),a=Ee({hostname:e.headers.host}),n=Ee({detectedLocale:t});if(a&&n){let s=n.domain===a.domain,d=n.defaultLocale===t;if(!s||!d){let u=`http${n.http?"":"s"}`,l=d?"":t;return{type:"core",statusCode:307,headers:{Location:`${u}://${n.domain}/${l}`},body:A(),isBase64Encoded:!1}}}let i=a?.defaultLocale??r.defaultLocale;return o.toLowerCase()!==i.toLowerCase()?{type:"core",statusCode:307,headers:{Location:D(e.url,`/${o}`)},body:A(),isBase64Encoded:!1}:!1}function Tr(e,r,t){let o=Ar(e),a=o+=1831565813;a=Math.imul(a^a>>>15,a|1),a^=a+Math.imul(a^a>>>7,a|61);let n=((a^a>>>14)>>>0)/4294967296,i=Math.floor(n*r);return`${t}-${i}`}function _e(e){let r=Number.parseInt(process.env.MAX_REVALIDATE_CONCURRENCY??"10");return Tr(e,r,"revalidate")}function Ar(e){let r=1779033703,t=3144134277,o=1013904242,a=2773480762;for(let n=0,i;n<e.length;n++)i=e.charCodeAt(n),r=t^Math.imul(r^i,597399067),t=o^Math.imul(t^i,2869860233),o=a^Math.imul(o^i,951274213),a=r^Math.imul(a^i,2716044179);return r=Math.imul(o^r>>>18,597399067),t=Math.imul(a^t>>>22,2869860233),o=Math.imul(r^o>>>17,951274213),a=Math.imul(t^a>>>19,2716044179),r^=t^o^a,t^=r,o^=r,a^=r,r>>>0}function le(e,r){if(!e)return!1;let t=/^https?:\/\//;return r?t.test(e)&&!e.includes(r):t.test(e)}function pt(e){if(e==="")return{};let r=e.split("&");return ie(r.map(t=>{let[o,a]=t.split("=");return[o,a]}))}function ht(e,r){if(!r){let a=/\/([^?]*)\??(.*)/,n=e.match(a);return{hostname:"",pathname:n?.[1]?`/${n[1]}`:e,protocol:"",queryString:n?.[2]??""}}let t=/^(https?:)\/\/?([^\/\s]+)(\/[^?]*)?(\?.*)?/,o=e.match(t);if(!o)throw new Error(`Invalid external URL: ${e}`);return{protocol:o[1]??"https:",hostname:o[2],pathname:o[3]??"",queryString:o[4]?.slice(1)??""}}function D(e,r){let t=y.basePath??"";return new URL(`${t}${r}`,e).href}function ve(e){let r=[];return Object.entries(e).forEach(([t,o])=>{Array.isArray(o)?o.forEach(a=>r.push(`${t}=${a}`)):r.push(`${t}=${o}`)}),r.length>0?`?${r.join("&")}`:""}function mt(e,r){if(r?.functions?.["/_middleware"])return r.functions["/_middleware"].matchers?.map(({regexp:o})=>new RegExp(o))??[/.*/];let t=e.middleware["/"];return t?.matchers?t.matchers.map(({regexp:o})=>new RegExp(o)):[]}function Y(e,{isPath:r}={}){let t=e.replaceAll("(.)","_\xB51_").replaceAll("(..)","_\xB52_").replaceAll("(...)","_\xB53_");return r?t:t.replaceAll("+","_\xB54_")}function ue(e){return e.replaceAll("_\xB51_","(.)").replaceAll("_\xB52_","(..)").replaceAll("_\xB53_","(...)").replaceAll("_\xB54_","+")}function gt(e,r){return e==="GET"||e==="HEAD"||!r?void 0:new ReadableStream({start(o){o.enqueue(r),o.close()}})}var ft;(function(e){e.CACHE_CONTROL="cache-control",e.NEXT_CACHE="x-nextjs-cache"})(ft||(ft={}));function de(e,r,t=!1){if(!URL.canParse(e))return e;let o=new URL(e),a=new URL(r).origin,n=o.search;t&&n&&(n=`?${Lr(Nr(n.slice(1)))}`);let i=`${o.origin}${o.pathname}${n}${o.hash}`;return o.origin===a?i.slice(a.length):i}T();import{createHash as Hr}from"node:crypto";z();T();async function xt(e,r,t){if(globalThis.openNextConfig.dangerous?.disableTagCache)return!1;if(!t.value)return!0;if("type"in t&&t.type==="page")return!1;let a=t.lastModified??Date.now();return globalThis.tagCache.mode==="nextMode"?await globalThis.tagCache.hasBeenRevalidated(r,a):await globalThis.tagCache.getLastModified(e,a)===-1}function wt(e){if(!e)return[];try{return e.meta?.headers?.["x-next-cache-tags"]?.split(",")??[]}catch{return[]}}T();var Z=60*60*24*365,yt=60*60*24*30,Or="RSC, Next-Router-State-Tree, Next-Router-Prefetch, Next-Router-Segment-Prefetch, Next-Url";async function Rt(e,r,t,o,a){let n=Z,i=Object.entries(j.routes).find(l=>l[0]===e)?.[1];o===void 0&&i?n=i.initialRevalidateSeconds===!1?Z:i.initialRevalidateSeconds:o!==void 0&&(n=o===!1?Z:o);let s=Math.round((Date.now()-(a??0))/1e3),d=l=>Hr("md5").update(l).digest("hex"),u=d(r);if(o===0)return{"cache-control":"private, no-cache, no-store, max-age=0, must-revalidate","x-opennext-cache":"ERROR",etag:u};if(n!==Z){let l=Math.max(n-s,1);g("sMaxAge",{finalRevalidate:n,age:s,lastModified:a,revalidate:o});let c=l===1;if(c){let f=y.trailingSlash?`${e}/`:e;y.basePath&&(f=`${y.basePath}${f}`),await globalThis.queue.send({MessageBody:{host:t,url:f,eTag:u,lastModified:a??Date.now()},MessageDeduplicationId:d(`${e}-${a}-${u}`),MessageGroupId:_e(e)})}return{"cache-control":`s-maxage=${l}, stale-while-revalidate=${yt}`,"x-opennext-cache":c?"STALE":"HIT",etag:u}}return{"cache-control":`s-maxage=${Z}, stale-while-revalidate=${yt}`,"x-opennext-cache":"HIT",etag:u}}async function Mr(e,r,t,o){g("Returning result from experimental cache");let a="",n="application/octet-stream",i=!1;switch(t.type){case"app":i=!!e.headers.rsc,a=i?t.rsc:t.html,n=i?"text/x-component":"text/html; charset=utf-8";break;case"page":i=!!e.query.__nextDataReq,a=i?JSON.stringify(t.json):t.html,n=i?"application/json":"text/html; charset=utf-8";break}let s=await Rt(r,a,e.headers.host,t.revalidate,o);return{type:"core",statusCode:t.meta?.status??200,body:ce(a,!1),isBase64Encoded:!1,headers:{...s,"content-type":n,...t.meta?.headers,vary:Or}}}function Ir(e,r){return e.replace(new RegExp(`([/#?]${r?"|%(2f|23|3f|5c)":""})`,"gi"),t=>encodeURIComponent(t))}function $r(e){return e.split("/").map(r=>{try{return Ir(decodeURIComponent(r),!0)}catch{return r}}).join("/")}async function Et(e){if(e.headers["next-action"]||e.headers["x-prerender-revalidate"])return e;let r=e.headers.cookie||"";if(r.includes("__prerender_bypass")||r.includes("__next_preview_data"))return g("Preview mode detected, passing through to handler"),e;let o=k(e);y.basePath&&(o=o.replace(y.basePath,"")),o=o.replace(/\/$/,""),o=$r(o),g("Checking cache for",o,j);let a=Object.keys(j.routes).includes(o??"/")||Object.values(j.dynamicRoutes).some(n=>new RegExp(n.routeRegex).test(o));if(g("isISR",a),a)try{let n=await globalThis.incrementalCache.get(o??"/index");if(g("cached data in interceptor",n),!n?.value)return e;if(n.value?.type==="app"){let s=wt(n.value);if(await xt(o,s,n))return e}let i=e.headers.host;switch(n?.value?.type){case"app":case"page":return Mr(e,o,n.value,n.lastModified);case"redirect":{let s=await Rt(o,"",i,n.value.revalidate,n.lastModified);return{type:"core",statusCode:n.value.meta?.status??307,body:A(),headers:{...n.value.meta?.headers??{},...s},isBase64Encoded:!1}}default:return e}}catch(n){return g("Error while fetching cache",n),e}return e}function jr(e){for(var r=[],t=0;t<e.length;){var o=e[t];if(o==="*"||o==="+"||o==="?"){r.push({type:"MODIFIER",index:t,value:e[t++]});continue}if(o==="\\"){r.push({type:"ESCAPED_CHAR",index:t++,value:e[t++]});continue}if(o==="{"){r.push({type:"OPEN",index:t,value:e[t++]});continue}if(o==="}"){r.push({type:"CLOSE",index:t,value:e[t++]});continue}if(o===":"){for(var a="",n=t+1;n<e.length;){var i=e.charCodeAt(n);if(i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122||i===95){a+=e[n++];continue}break}if(!a)throw new TypeError("Missing parameter name at ".concat(t));r.push({type:"NAME",index:t,value:a}),t=n;continue}if(o==="("){var s=1,d="",n=t+1;if(e[n]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(n));for(;n<e.length;){if(e[n]==="\\"){d+=e[n++]+e[n++];continue}if(e[n]===")"){if(s--,s===0){n++;break}}else if(e[n]==="("&&(s++,e[n+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(n));d+=e[n++]}if(s)throw new TypeError("Unbalanced pattern at ".concat(t));if(!d)throw new TypeError("Missing pattern at ".concat(t));r.push({type:"PATTERN",index:t,value:d}),t=n;continue}r.push({type:"CHAR",index:t,value:e[t++]})}return r.push({type:"END",index:t,value:""}),r}function _t(e,r){r===void 0&&(r={});for(var t=jr(e),o=r.prefixes,a=o===void 0?"./":o,n=r.delimiter,i=n===void 0?"/#?":n,s=[],d=0,u=0,l="",c=function(S){if(u<t.length&&t[u].type===S)return t[u++].value},f=function(S){var E=c(S);if(E!==void 0)return E;var C=t[u],B=C.type,Ut=C.index;throw new TypeError("Unexpected ".concat(B," at ").concat(Ut,", expected ").concat(S))},p=function(){for(var S="",E;E=c("CHAR")||c("ESCAPED_CHAR");)S+=E;return S},h=function(S){for(var E=0,C=i;E<C.length;E++){var B=C[E];if(S.indexOf(B)>-1)return!0}return!1},m=function(S){var E=s[s.length-1],C=S||(E&&typeof E=="string"?E:"");if(E&&!C)throw new TypeError('Must have text between two parameters, missing text after "'.concat(E.name,'"'));return!C||h(C)?"[^".concat(F(i),"]+?"):"(?:(?!".concat(F(C),")[^").concat(F(i),"])+?")};u<t.length;){var w=c("CHAR"),R=c("NAME"),v=c("PATTERN");if(R||v){var b=w||"";a.indexOf(b)===-1&&(l+=b,b=""),l&&(s.push(l),l=""),s.push({name:R||d++,prefix:b,suffix:"",pattern:v||m(b),modifier:c("MODIFIER")||""});continue}var x=w||c("ESCAPED_CHAR");if(x){l+=x;continue}l&&(s.push(l),l="");var _=c("OPEN");if(_){var b=p(),P=c("NAME")||"",U=c("PATTERN")||"",M=p();f("CLOSE"),s.push({name:P||(U?d++:""),pattern:P&&!U?m(b):U,prefix:b,suffix:M,modifier:c("MODIFIER")||""});continue}f("END")}return s}function Q(e,r){return Dr(_t(e,r),r)}function Dr(e,r){r===void 0&&(r={});var t=Ce(r),o=r.encode,a=o===void 0?function(d){return d}:o,n=r.validate,i=n===void 0?!0:n,s=e.map(function(d){if(typeof d=="object")return new RegExp("^(?:".concat(d.pattern,")$"),t)});return function(d){for(var u="",l=0;l<e.length;l++){var c=e[l];if(typeof c=="string"){u+=c;continue}var f=d?d[c.name]:void 0,p=c.modifier==="?"||c.modifier==="*",h=c.modifier==="*"||c.modifier==="+";if(Array.isArray(f)){if(!h)throw new TypeError('Expected "'.concat(c.name,'" to not repeat, but got an array'));if(f.length===0){if(p)continue;throw new TypeError('Expected "'.concat(c.name,'" to not be empty'))}for(var m=0;m<f.length;m++){var w=a(f[m],c);if(i&&!s[l].test(w))throw new TypeError('Expected all "'.concat(c.name,'" to match "').concat(c.pattern,'", but got "').concat(w,'"'));u+=c.prefix+w+c.suffix}continue}if(typeof f=="string"||typeof f=="number"){var w=a(String(f),c);if(i&&!s[l].test(w))throw new TypeError('Expected "'.concat(c.name,'" to match "').concat(c.pattern,'", but got "').concat(w,'"'));u+=c.prefix+w+c.suffix;continue}if(!p){var R=h?"an array":"a string";throw new TypeError('Expected "'.concat(c.name,'" to be ').concat(R))}}return u}}function be(e,r){var t=[],o=vt(e,t,r);return Ur(o,t,r)}function Ur(e,r,t){t===void 0&&(t={});var o=t.decode,a=o===void 0?function(n){return n}:o;return function(n){var i=e.exec(n);if(!i)return!1;for(var s=i[0],d=i.index,u=Object.create(null),l=function(f){if(i[f]===void 0)return"continue";var p=r[f-1];p.modifier==="*"||p.modifier==="+"?u[p.name]=i[f].split(p.prefix+p.suffix).map(function(h){return a(h,p)}):u[p.name]=a(i[f],p)},c=1;c<i.length;c++)l(c);return{path:s,index:d,params:u}}}function F(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Ce(e){return e&&e.sensitive?"":"i"}function kr(e,r){if(!r)return e;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,o=0,a=t.exec(e.source);a;)r.push({name:a[1]||o++,prefix:"",suffix:"",modifier:"",pattern:""}),a=t.exec(e.source);return e}function Fr(e,r,t){var o=e.map(function(a){return vt(a,r,t).source});return new RegExp("(?:".concat(o.join("|"),")"),Ce(t))}function Br(e,r,t){return qr(_t(e,t),r,t)}function qr(e,r,t){t===void 0&&(t={});for(var o=t.strict,a=o===void 0?!1:o,n=t.start,i=n===void 0?!0:n,s=t.end,d=s===void 0?!0:s,u=t.encode,l=u===void 0?function(E){return E}:u,c=t.delimiter,f=c===void 0?"/#?":c,p=t.endsWith,h=p===void 0?"":p,m="[".concat(F(h),"]|$"),w="[".concat(F(f),"]"),R=i?"^":"",v=0,b=e;v<b.length;v++){var x=b[v];if(typeof x=="string")R+=F(l(x));else{var _=F(l(x.prefix)),P=F(l(x.suffix));if(x.pattern)if(r&&r.push(x),_||P)if(x.modifier==="+"||x.modifier==="*"){var U=x.modifier==="*"?"?":"";R+="(?:".concat(_,"((?:").concat(x.pattern,")(?:").concat(P).concat(_,"(?:").concat(x.pattern,"))*)").concat(P,")").concat(U)}else R+="(?:".concat(_,"(").concat(x.pattern,")").concat(P,")").concat(x.modifier);else{if(x.modifier==="+"||x.modifier==="*")throw new TypeError('Can not repeat "'.concat(x.name,'" without a prefix and suffix'));R+="(".concat(x.pattern,")").concat(x.modifier)}else R+="(?:".concat(_).concat(P,")").concat(x.modifier)}}if(d)a||(R+="".concat(w,"?")),R+=t.endsWith?"(?=".concat(m,")"):"$";else{var M=e[e.length-1],S=typeof M=="string"?w.indexOf(M[M.length-1])>-1:M===void 0;a||(R+="(?:".concat(w,"(?=").concat(m,"))?")),S||(R+="(?=".concat(w,"|").concat(m,")"))}return new RegExp(R,Ce(t))}function vt(e,r,t){return e instanceof RegExp?kr(e,r):Array.isArray(e)?Fr(e,r,t):Br(e,r,t)}function bt(e){let r=e.host+e.pathname;return`${e.protocol}//${r.replace(/\\/g,"/").replace(/\/\/+/g,"/")}${e.search}`}z();T();var Wr=`^/(?:${N.locales.map(e=>`${e}/?`).join("|")})?`,zr=N.basePath?`^${N.basePath}/?`:"^/",Qr=Wr.replace("^/",zr);function Ct(e){let r=e.map(a=>({page:a.page,regexp:new RegExp(a.regex.replace("^/",Qr))})),t=new Set,o=new Set;for(let[a,n]of Object.entries(ye))a.endsWith("page")?t.add(n):a.endsWith("route")&&o.add(n);return function(n){return r.filter(s=>s.regexp.test(n)).map(s=>{let d="page";return t.has(s.page)?d="app":o.has(s.page)&&(d="route"),{route:s.page,type:d}})}}var ee=Ct([...N.routes.static,...Xr()]),te=Ct(N.routes.dynamic);function Xr(){let e=a=>({page:a,regex:`^${a}(?:/)?$`}),r=new Set(N.routes.dynamic.map(({page:a})=>a)),t=Object.keys(ct).filter(a=>a.startsWith("/api/")&&!r.has(a)).map(e),o=Object.values(ye).filter(a=>a.startsWith("/api/")||a==="/api"&&!r.has(a)).map(e);return[...t,...o]}var Pt=(e,r,t)=>o=>{switch(o.type){case"header":return!!e?.[o.key.toLowerCase()]&&new RegExp(o.value??"").test(e[o.key.toLowerCase()]??"");case"cookie":return!!r?.[o.key]&&new RegExp(o.value??"").test(r[o.key]??"");case"query":return t[o.key]&&Array.isArray(o.value)?o.value.reduce((a,n)=>a||new RegExp(n).test(t[o.key]),!1):new RegExp(o.value??"").test(t[o.key]??"");case"host":return e?.host!==""&&new RegExp(o.value??"").test(e.host);default:return!1}};function fe(e,r,t=!1){return r?r.reduce((o,a)=>o===!1?!1:t?!e(a):e(a),!0):!0}var Gr=e=>r=>{g("value",r);let t=e(r);return t?t.params:{}},Jr=(e,r,t)=>o=>{if(!o.value)return{};let a=new RegExp(`^${o.value}$`),n=i=>i.match(a)?.groups??{};switch(o.type){case"header":return n(e[o.key.toLowerCase()]??"");case"cookie":return n(r[o.key]??"");case"query":return Array.isArray(t[o.key])?n(t[o.key].join(",")):n(t[o.key]??"");case"host":return n(e.host??"")}};function St(e,r,t){if(!e)return t;let{params:o}=e;return Object.keys(o).length>0?r(o):t}function Tt(e,r){if(!r)return{};let t=Pt(e.headers,e.cookies,e.query),o={},a=k(e);for(let{headers:n,has:i,missing:s,regex:d,source:u,locale:l}of r){let c=l===!1?e.rawPath:a;if(new RegExp(d).test(c)&&fe(t,i)&&fe(t,s,!0)){let p=be(u)(c);n.forEach(h=>{try{let m=St(p,Q(h.key),h.key),w=St(p,Q(h.value),h.value);o[m]=w}catch{g(`Error matching header ${h.key} with value ${h.value}`),o[h.key]=h.value}})}}return o}function re(e,r){let{rawPath:t,headers:o,query:a,cookies:n,url:i}=e,s=k(e),d=Pt(o,n,a),u=Jr(o,n,a),l=r.find(h=>{let m=h.locale===!1?t:s;return new RegExp(h.regex).test(m)&&fe(d,h.has)&&fe(d,h.missing,!0)}),c=a,f=i,p=le(l?.destination);if(g("isExternalRewrite",p),l){let{pathname:h,protocol:m,hostname:w,queryString:R}=ht(l.destination,p),v=l.locale===!1?t:s;g("urlParts",{pathname:h,protocol:m,hostname:w,queryString:R});let b=Q(Y(h,{isPath:!0})),x=Q(Y(w)),_=Q(Y(R)),P={...Gr(be(Y(l.source,{isPath:!0})))(v),...l.has?.reduce((C,B)=>Object.assign(C,u(B)),{}),...l.missing?.reduce((C,B)=>Object.assign(C,u(B)),{})},U=Object.keys(P).length>0,M=R,S=w,E=h;if(U&&(E=ue(b(P)),S=ue(x(P)),M=ue(_(P))),y.i18n&&!p){let C=E.replace(new RegExp(`^/(${y.i18n.locales.join("|")})`),"");C.startsWith("/api/")&&(E=C)}f=p?`${m}//${S}${E}`:new URL(E,e.url).href,c={...a,...pt(M)},f+=ve(c),g("rewrittenUrl",{rewrittenUrl:f,finalQuery:c,isUsingParams:U})}return{internalEvent:{...e,query:c,rawPath:new URL(f).pathname,url:f},__rewrite:l,isExternalRewrite:p}}function Vr(e){return e.rawPath.match(/(\\|\/\/)/)?{type:e.type,statusCode:308,headers:{Location:bt(new URL(e.url))},body:A(),isBase64Encoded:!1}:!1}function Kr(e){if(new URL(e.rawPath,"http://localhost").host!=="localhost"||y.skipTrailingSlashRedirect||e.rawPath.startsWith("/api/"))return!1;let t=A();if(y.trailingSlash&&!e.headers["x-nextjs-data"]&&!e.rawPath.endsWith("/")&&!e.rawPath.match(/[\w-]+\.[\w]+$/g)){let o=e.url.split("?");return{type:e.type,statusCode:308,headers:{Location:`${o[0]}/${o[1]?`?${o[1]}`:""}`},body:t,isBase64Encoded:!1}}if(!y.trailingSlash&&e.rawPath.endsWith("/")&&e.rawPath!=="/"){let o=e.url.split("?");return{type:e.type,statusCode:308,headers:{Location:`${o[0].replace(/\/$/,"")}${o[1]?`?${o[1]}`:""}`},body:t,isBase64Encoded:!1}}return!1}function At(e,r){let t=Vr(e);if(t)return t;let o=Kr(e);if(o)return o;let a=dt(e);if(a)return a;let{internalEvent:n,__rewrite:i}=re(e,r.filter(s=>!s.internal));if(i&&!i.internal)return{type:e.type,statusCode:i.statusCode??308,headers:{Location:n.url},body:A(),isBase64Encoded:!1}}function Nt(e,r){let{rawPath:t,query:o}=e,a=y.basePath??"",n=`${a}/_next/data/${r}`;if(t.startsWith("/_next/data")&&!t.startsWith(n))return{type:e.type,statusCode:404,body:ce("{}"),headers:{"Content-Type":"application/json"},isBase64Encoded:!1};if(t.startsWith(n)&&t.endsWith(".json")){let i=`${a}${t.slice(n.length,-5).replace(/^\/index$/,"/")}`;return o.__nextDataReq="1",{...e,rawPath:i,query:o,url:new URL(`${i}${ve(o)}`,e.url).href}}return e}function Lt(e,r){let{rawPath:t}=e,{dynamicRoutes:o,routes:a}=r,n=Object.entries(o).filter(([,{fallback:h}])=>h===!1),i=n.some(([,{routeRegex:h}])=>new RegExp(h).test(t)),s=y.i18n?.locales,u=s?.includes(t.split("/")[1])||s===void 0?t:`/${y.i18n?.defaultLocale}${t}`;u!=="/"&&y.trailingSlash&&u.endsWith("/")&&(u=u.slice(0,-1));let l=ee(u),c=n.map(([h])=>h),f=te(u).filter(({route:h})=>!c.includes(h)),p=Object.keys(a).includes(u);return i&&!p&&l.length===0&&f.length===0?{event:{...e,rawPath:"/404",url:D(e.url,"/404"),headers:{...e.headers,"x-invoke-status":"404"}},isISR:!1}:{event:e,isISR:i||p}}z();xe();var eo=lt,to=ut,ro=mt(eo,to),oo=new Set([301,302,303,307,308]);function ao(){return Promise.resolve().then(()=>(Mt(),Ot))}async function It(e,r,t=ao){let o=e.headers;if(o["x-isr"]&&o["x-prerender-revalidate"]===j.preview.previewModeId)return e;let a=k(e);if(!ro.some(x=>x.test(a)))return e;let i=new URL(a,e.url);i.search=r;let s=i.href,u=await(await t()).default({geo:{city:decodeURIComponent(o["x-open-next-city"]),country:o["x-open-next-country"],region:o["x-open-next-region"],latitude:o["x-open-next-latitude"],longitude:o["x-open-next-longitude"]},headers:o,method:e.method||"GET",nextConfig:{basePath:y.basePath,i18n:y.i18n,trailingSlash:y.trailingSlash},url:s,body:gt(e.method,e.body)}),l=u.status,c=u.headers,f={},p={},h=["x-middleware-override-headers","x-middleware-next","x-middleware-rewrite","content-encoding"],m="x-middleware-request-";c.forEach((x,_)=>{if(_.startsWith(m)){let P=_.substring(m.length);f[P]=x}else{if(h.includes(_.toLowerCase()))return;_.toLowerCase()==="set-cookie"?p[_]=p[_]?[...p[_],x]:[x]:oo.has(l)&&_.toLowerCase()==="location"?p[_]=de(x,e.url):p[_]=x}});let w=c.get("x-middleware-rewrite"),R=!1,v=e.query,b=e.url;if(w)if(b=w,le(b,e.headers.host))R=!0;else{let x=new URL(w);v=se(x.searchParams),"__nextDataReq"in e.query&&(v.__nextDataReq=e.query.__nextDataReq)}if(!w&&!c.get("x-middleware-next")){let x=u.body??A();return{type:e.type,statusCode:l,headers:p,body:x,isBase64Encoded:!1}}return{responseHeaders:p,url:b,rawPath:new URL(b).pathname,type:e.type,headers:{...e.headers,...f},body:e.body,method:e.method,query:v,cookies:e.cookies,remoteAddress:e.remoteAddress,isExternalRewrite:R,rewriteStatusCode:l}}var Pe="x-middleware-response-",Ja=Pe.length,G="x-opennext-",$t=`${G}initial-url`,Va=`${G}locale`,jt=`${G}resolved-routes`,Dt=`${G}rewrite-status-code`,pe=`${G}request-id`,no={"x-open-next-city":"x-vercel-ip-city","x-open-next-country":"x-vercel-ip-country","x-open-next-region":"x-vercel-ip-country-region","x-open-next-latitude":"x-vercel-ip-latitude","x-open-next-longitude":"x-vercel-ip-longitude"};function Se(e,r){let t=oe(e),o=e.headers,a=t?"":Pe;Object.entries(r).forEach(([n,i])=>{i&&(o[a+n]=Array.isArray(i)?i.join(","):i)})}async function Te(e,{assetResolver:r}){try{for(let[m,w]of Object.entries(no)){let R=e.headers[m];R&&(e.headers[w]=R)}for(let m of Object.keys(e.headers))(m.startsWith(G)||m.startsWith(Pe))&&delete e.headers[m];let t=Tt(e,st),o=Nt(e,we);if(oe(o))return o;let a=At(o,N.redirects);if(a)return a.headers.Location=de(a.headers.Location,e.url,!0),g("redirect",a),a;let n=await It(o,new URL(e.url).search);if(oe(n))return n;t={...n.responseHeaders,...t};let i=n.isExternalRewrite??!1;if(o=n,!i){let m=re(o,N.rewrites.beforeFiles);if(o=m.internalEvent,i=m.isExternalRewrite,!i){let w=await r?.maybeGetAssetResult?.(o);if(w)return Se(w,t),w}}let s=ee(o.rawPath),d=!i&&s.length>0;if(!(d||i)){let m=re(o,N.rewrites.afterFiles);o=m.internalEvent,i=m.isExternalRewrite}let u=!1;if(!i){let m=Lt(o,j);o=m.event,u=m.isISR}let l=te(o.rawPath),c=!i&&l.length>0;if(!(c||d||i)){let m=re(o,N.rewrites.fallback);o=m.internalEvent,i=m.isExternalRewrite}let f=o.rawPath.startsWith("/_next/image");if(d||c||i||f||ee(o.rawPath).length>0||te(o.rawPath).length>0||(o={...o,rawPath:"/404",url:D(o.url,"/404"),headers:{...o.headers,"x-middleware-response-cache-control":"private, no-cache, no-store, max-age=0, must-revalidate"}}),globalThis.openNextConfig.dangerous?.enableCacheInterception&&!oe(o)&&(g("Cache interception enabled"),o=await Et(o),oe(o)))return Se(o,t),o;Se(o,t);let h=[...s,...l];return g("resolvedRoutes",h),{internalEvent:o,isExternalRewrite:i,origin:!1,isISR:u,resolvedRoutes:h,initialURL:e.url,locale:y.i18n?K(o,y.i18n):void 0,rewriteStatusCode:n.rewriteStatusCode}}catch(t){return I("Error in routingHandler",t),{internalEvent:{type:"core",method:"GET",rawPath:"/500",url:D(e.url,"/500"),headers:{...e.headers},query:e.query,cookies:e.cookies,remoteAddress:e.remoteAddress},isExternalRewrite:!1,origin:!1,isISR:!1,resolvedRoutes:[],initialURL:e.url,locale:y.i18n?K(e,y.i18n):void 0}}}function oe(e){return e!=null&&"statusCode"in e}globalThis.internalFetch=fetch;globalThis.__openNextAls=new AsyncLocalStorage;var io=async(e,r)=>{let t=globalThis.openNextConfig.middleware,o=await Xe(t?.originResolver),a=await Je(t?.override?.proxyExternalRequest),n=await Ge(t?.assetResolver),i=Math.random().toString(36);return Ne({isISRRevalidation:e.headers["x-isr"]==="1",waitUntil:r?.waitUntil,requestId:i},async()=>{let s=await Te(e,{assetResolver:n});if("internalEvent"in s){if(g("Middleware intercepted event",e),!s.isExternalRewrite){let d=await o.resolve(s.internalEvent.rawPath);return{type:"middleware",internalEvent:{...s.internalEvent,headers:{...s.internalEvent.headers,[$t]:e.url,[jt]:JSON.stringify(s.resolvedRoutes),[pe]:i,[Dt]:String(s.rewriteStatusCode)}},isExternalRewrite:s.isExternalRewrite,origin:d,isISR:s.isISR,initialURL:s.initialURL,resolvedRoutes:s.resolvedRoutes}}try{return a.proxy(s.internalEvent)}catch(d){return I("External request failed.",d),{type:"middleware",internalEvent:{...s.internalEvent,headers:{...s.internalEvent.headers,[pe]:i},rawPath:"/500",url:D(s.internalEvent.url,"/500"),method:"GET"},isExternalRewrite:!1,origin:!1,isISR:s.isISR,initialURL:s.internalEvent.url,resolvedRoutes:[{route:"/500",type:"page"}]}}}return s.headers[pe]=i,g("Middleware response",s),s})},so=await Ve({handler:io,type:"middleware"}),cn={fetch:so};export{cn as default,so as handler};
